#!/bin/bash

# Function to modify /etc/hosts file
modify_hosts() {
  local ip_localhost="$1"
  local ip_facebook="$2"

  # Backup original /etc/hosts
  sudo cp /etc/hosts /etc/hosts.bak

  # Modify localhost entry
  sudo sed -i "s/127.0.0.1/localhost $ip_localhost/g" /etc/hosts

  # Modify facebook.com entry
  grep -q "^$ip_facebook\s+facebook.com" /etc/hosts || sudo echo -e "$ip_facebook\tfacebook.com" >> /etc/hosts
}

# Read user input for IP addresses
read -p "Enter the desired IP address for localhost (default: 127.0.0.2): " ip_localhost
read -p "Enter the desired IP address for facebook.com (default: 8.8.8.8): " ip_facebook

# Set default values if user doesn't provide input
ip_localhost=${ip_localhost:-127.0.0.2}
ip_facebook=${ip_facebook:-8.8.8.8}

# Confirm changes
echo "You are about to modify /etc/hosts file."
echo "localhost will resolve to $ip_localhost and facebook.com will resolve to $ip_facebook."
read -p "Are you sure you want to continue? (y/N) " confirmation

# Check confirmation and modify hosts file (requires sudo)
if [[ "$confirmation" =~ ^[Yy]$ ]]; then
  sudo -E bash -c "modify_hosts '$ip_localhost' '$ip_facebook'"
  echo "Successfully modified /etc/hosts file."
else
  echo "Aborting. No changes made."
fi
